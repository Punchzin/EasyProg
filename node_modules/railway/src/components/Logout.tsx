import { Box, Text } from "ink";
import React from "react";
import { logout } from "../auth";
import { useAsyncAction } from "../hooks/useAsyncAction";
import { useExitDelay } from "../hooks/useExitDelay";
import { Spinner } from "./Spinner";

export const Logout: React.FC = () => {
  const exit = useExitDelay();

  const status = useAsyncAction(
    async () => {
      logout();
    },
    exit,
    [],
  );

  return (
    <Box>
      {status.loading ? (
        <Text>
          <Spinner /> Logging out...
        </Text>
      ) : status.error != null ? (
        <Text>Oops, Something went wrong :(</Text>
      ) : (
        <Text>Logged out</Text>
      )}
    </Box>
  );
};
